<!DOCTYPE html>
<html>
<head>
  <title>Zikr Live Counter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      height: 100vh;
      background: radial-gradient(circle at center, #0F172A, #020617);
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
    }

    .container {
      max-width: 800px;
    }

    h1 {
      font-size: 28px;
      color: #FFD700;
      margin-bottom: 20px;
    }

    .counter {
      font-size: 60px;
      font-weight: bold;
      color: #00E5FF;
      letter-spacing: 2px;
    }

    .sub {
      margin-top: 20px;
      font-size: 14px;
      color: gray;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>üåç Zikr Completed Worldwide</h1>
  <div class="counter" id="counter">0</div>
  <div class="sub">Live Community Impact</div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js"></script>

<script type="module">

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

  // üî• REPLACE WITH YOUR FIREBASE CONFIG
 const firebaseConfig = {
  apiKey: "AIzaSyBrAE46NAujjWZz6kHGzFBlNGeEQTP48bQ",
  authDomain: "zikrmate-a4546.firebaseapp.com",
  databaseURL: "https://zikrmate-a4546-default-rtdb.firebaseio.com",
  projectId: "zikrmate-a4546",
  storageBucket: "zikrmate-a4546.firebasestorage.app",
  messagingSenderId: "421414480361",
  appId: "1:421414480361:web:d67709cae28dc8303e4378"
};


  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);

  const counterElement = document.getElementById("counter");

  function animateValue(start, end, duration) {
    let startTimestamp = null;
    const step = (timestamp) => {
      if (!startTimestamp) startTimestamp = timestamp;
      const progress = Math.min((timestamp - startTimestamp) / duration, 1);
      const value = Math.floor(progress * (end - start) + start);
      counterElement.innerText = value.toLocaleString();
      if (progress < 1) {
        window.requestAnimationFrame(step);
      }
    };
    window.requestAnimationFrame(step);
  }

  const countsRef = ref(database, "global_stats/predefined_counts");

  let previousValue = 0;

  onValue(countsRef, (snapshot) => {
    const data = snapshot.val();
    if (!data) return;

    let total = 0;

    const defaultTargets = {
      "SubhanAllah": 33,
      "Alhamdulillah": 33,
      "Allahu Akbar": 33,
      "SubhanAllahi wa bihamdihi": 100,
      "Astaghfirullah": 100,
      "La ilaha illallah": 100,
      "Durood": 10
    };

    Object.keys(data).forEach(key => {
      const cycles = data[key] || 0;
      const multiplier = defaultTargets[key] || 33;
      total += cycles * multiplier;
    });

    animateValue(previousValue, total, 1500);
    previousValue = total;
  });

</script>

</body>
</html>
